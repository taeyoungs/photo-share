[{"D:\\projects\\photo-share\\src\\App.js":"1","D:\\projects\\photo-share\\src\\index.js":"2","D:\\projects\\photo-share\\src\\Users.js":"3","D:\\projects\\photo-share\\src\\AuthorizedUser.js":"4","D:\\projects\\photo-share\\src\\hooks.js":"5","D:\\projects\\photo-share\\src\\UserList.js":"6"},{"size":2730,"mtime":1608516587727,"results":"7","hashOfConfig":"8"},{"size":307,"mtime":1608181630080,"results":"9","hashOfConfig":"8"},{"size":1648,"mtime":1608518247700,"results":"10","hashOfConfig":"8"},{"size":2407,"mtime":1608182252292,"results":"11","hashOfConfig":"8"},{"size":519,"mtime":1608179617476,"results":"12","hashOfConfig":"8"},{"size":905,"mtime":1608517582223,"results":"13","hashOfConfig":"8"},{"filePath":"14","messages":"15","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},"3ohu3y",{"filePath":"16","messages":"17","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"18"},{"filePath":"19","messages":"20","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"21","messages":"22","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"23","usedDeprecatedRules":"18"},{"filePath":"24","messages":"25","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"18"},{"filePath":"26","messages":"27","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},"D:\\projects\\photo-share\\src\\App.js",["28"],"D:\\projects\\photo-share\\src\\index.js",[],["29","30"],"D:\\projects\\photo-share\\src\\Users.js",[],"D:\\projects\\photo-share\\src\\AuthorizedUser.js",["31"],"import React, { useEffect, useState } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { useMutation, useQuery, useApolloClient, gql } from '@apollo/client';\r\nimport { ROOT_QUERY } from './App';\r\n// import { useQuery, useMutation } from '@apollo/client';\r\n\r\nconst GITHUB_AUTH_MUTATION = gql`\r\n    mutation githubAuth($code: String!) {\r\n        githubAuth(code: $code) {\r\n            token\r\n        }\r\n    }\r\n`;\r\n\r\nconst AuthorizedUser = () => {\r\n    const [signingIn, setSigningIn] = useState(false);\r\n    const history = useHistory();\r\n    const client = useApolloClient();\r\n    const [githubAuthMutation] = useMutation(GITHUB_AUTH_MUTATION, {\r\n        update(cache, { data }) {\r\n            localStorage.setItem('token', data.githubAuth.token);\r\n            history.replace('/');\r\n            setSigningIn(false);\r\n        },\r\n        refetchQueries: [{ query: ROOT_QUERY }],\r\n    });\r\n    const { loading, data } = useQuery(ROOT_QUERY);\r\n\r\n    useEffect(() => {\r\n        if (window.location.search.match(/code=/)) {\r\n            setSigningIn(true);\r\n            const code = window.location.search.replace('?code=', '');\r\n            githubAuthMutation({ variables: { code } });\r\n        }\r\n    }, []);\r\n\r\n    const requestCode = () => {\r\n        const clientID = '5a0e37336fd58ec70ac8';\r\n        window.location = `https://github.com/login/oauth/authorize?client_id=${clientID}&scope=user`;\r\n    };\r\n\r\n    const logout = () => {\r\n        localStorage.removeItem('token');\r\n        client.writeQuery({ query: ROOT_QUERY, data: { me: null } });\r\n    };\r\n\r\n    const CurrentUser = ({ name, avatar, logout }) => {\r\n        return (\r\n            <div>\r\n                <img src={avatar} width={48} height={48} alt=\"\" />\r\n                <h1>{name}</h1>\r\n                <button onClick={logout}>로그아웃</button>\r\n            </div>\r\n        );\r\n    };\r\n\r\n    const Me = () => {\r\n        return (\r\n            <>\r\n                {loading ? (\r\n                    <p>loading ...</p>\r\n                ) : data && data.me ? (\r\n                    <CurrentUser {...data.me} logout={logout} />\r\n                ) : (\r\n                    <button onClick={requestCode} disabled={signingIn}>\r\n                        깃허브로 로그인\r\n                    </button>\r\n                )}\r\n            </>\r\n        );\r\n    };\r\n\r\n    return <Me />;\r\n};\r\n\r\nexport default AuthorizedUser;\r\n","D:\\projects\\photo-share\\src\\hooks.js",[],"D:\\projects\\photo-share\\src\\UserList.js",["32"],{"ruleId":"33","severity":1,"message":"34","line":76,"column":8,"nodeType":"35","endLine":76,"endColumn":10,"suggestions":"36"},{"ruleId":"37","replacedBy":"38"},{"ruleId":"39","replacedBy":"40"},{"ruleId":"33","severity":1,"message":"41","line":35,"column":8,"nodeType":"35","endLine":35,"endColumn":10,"suggestions":"42"},{"ruleId":"33","severity":1,"message":"43","line":6,"column":8,"nodeType":"35","endLine":6,"endColumn":10,"suggestions":"44"},"react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'callback'. Either include it or remove the dependency array.","ArrayExpression",["45"],"no-native-reassign",["46"],"no-negated-in-lhs",["47"],"React Hook useEffect has a missing dependency: 'githubAuthMutation'. Either include it or remove the dependency array.",["48"],"React Hook useEffect has a missing dependency: 'subscribeToNewUsers'. Either include it or remove the dependency array. If 'subscribeToNewUsers' changes too often, find the parent component that defines it and wrap that definition in useCallback.",["49"],{"desc":"50","fix":"51"},"no-global-assign","no-unsafe-negation",{"desc":"52","fix":"53"},{"desc":"54","fix":"55"},"Update the dependencies array to be: [callback]",{"range":"56","text":"57"},"Update the dependencies array to be: [githubAuthMutation]",{"range":"58","text":"59"},"Update the dependencies array to be: [subscribeToNewUsers]",{"range":"60","text":"61"},[2394,2396],"[callback]",[1222,1224],"[githubAuthMutation]",[198,200],"[subscribeToNewUsers]"]